<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"
        integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous">
    <link rel="stylesheet" href="./css/cart.css">

    <title>Shopping Cart</title>
</head>

<body class="bg-light">

    <div class="container mb-5">
        <div class="row">
            <div class="col-md-12 card text-center p-4 mt-3 shadow">
                <h1>Shopping Cart</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-md-8" id="product-div">
                <div class="row">
                    <div class="col-md-12 card p-4 mt-3 shadow">
                        <div class="row">
                            <div class="col-md-7 d-flex align-items-center">
                                <i class="fas fa-trash-alt"></i>
                                <img src="./images/cart.jpg" class="product_image">
                                <h5>Latest Smart Phone - Xaomi</h5>
                            </div>
                            <div class="col-md-5 d-flex align-items-center justify-content-around">
                                <ul class="pagination pagination-md mt-2">
                                    <li class="page-item">
                                        <button class="page-link"
                                            onclick="decreaseNumber('item-value', 'product_price')"><i
                                                class="fas fa-minus"></i></button>
                                    </li>
                                    <li class="page-item">
                                        <input type="text" value="1" class="page-link" id="item-value">
                                    </li>
                                    <li class="page-item">
                                        <button class="page-link"
                                            onclick="increaseNumber('item-value', 'product_price')"><i
                                                class="fas fa-plus"></i></button>
                                    </li>
                                </ul>
                                <h4>$ <span id="product_price">15</span></h4>
                            </div>
                        </div>
                    </div>

                    <!-- 2nd product  -->
                    <div class="col-md-12 card p-4 mt-3 shadow">
                        <div class="row">
                            <div class="col-md-7 d-flex align-items-center">
                                <i class="fas fa-trash-alt"></i>
                                <img src="./images/cart.jpg" class="product_image">
                                <h5>Latest Smart Phone - Xaomi</h5>
                            </div>
                            <div class="col-md-5 d-flex align-items-center justify-content-around">
                                <ul class="pagination pagination-md mt-2">
                                    <li class="page-item">
                                        <button class="page-link"
                                            onclick="decreaseNumber('item-value11', 'product_price1')"><i
                                                class="fas fa-minus"></i></button>
                                    </li>
                                    <li class="page-item">
                                        <input type="text" value="1" id="item-value11" class="page-link">
                                    </li>
                                    <li class="page-item">
                                        <button class="page-link"
                                            onclick="increaseNumber('item-value11', 'product_price1')"><i
                                                class="fas fa-plus"></i></i></button>
                                    </li>
                                </ul>
                                <h4>$ <span id="product_price1">15</span></h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- right side bar  -->
            <div class="col-md-4">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card p-4 mt-3 shadow">
                            <h5>The Total Amount Of</h5><br><br>
                            <div class="d-flex justify-content-between">
                                <p>Product Amount</p>
                                <p>$<span id="product-amount">0.00</span></p>
                            </div>
                            <div class="d-flex justify-content-between">
                                <p>Shipping Charge</p>
                                <p>$<span id="shipping-charge">0</span></p>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between">
                                <p>The Total Amount of <br> (Including Vat)</p>
                                <p>$<span id="total-amount">0.00</span></p>
                            </div>
                            <br><button class="btn btn-primary mt-1">Checkout</button>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="card p-4 mt-3 shadow">
                            <a class="d-flex justify-content-between" data-toggle="collapse" href="#collapseExample"
                                aria-expanded="false" aria-controls="collapseExample">
                                Add a Discount Code (Optional)
                                <span><i class="fas fa-chevron-down pt-1"></i></span>
                            </a>
                            <div class="collapse" id="collapseExample">
                                <div class="mt-3">
                                    <input type="text" name="" id="discount_code1" class="form-control"
                                        placeholder="Enter the discount code">
                                    <small id="error_trw" class="text-dark mt-3">Code is "EASYFIE"</small>
                                </div>
                                <button class="btn btn-primary btn-sm mt-3" onclick="discountCode()">Apply</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>







    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>

    <script type="text/javascript">

        let productAmount = document.getElementById('product-amount')
        let shippingCharge = document.getElementById('shipping-charge')
        let totalAmount = document.getElementById('total-amount')

        const decreaseNumber = (incdec, productPrice) => {
            let itemval = document.getElementById(incdec);
            let price = document.getElementById(productPrice)
            if (itemval.value <= 1) {
                itemval.value = 1;
                alert('Negative quantity not allowed');
            } else {
                itemval.value = parseInt(itemval.value) - 1;
                price.innerHTML = parseFloat(price.innerHTML) - 15
                productAmount.innerHTML = parseFloat(productAmount.innerHTML) - 15
                totalAmount.innerHTML = parseFloat(productAmount.innerHTML) + parseFloat(shippingCharge.innerHTML)
            }
        }
        const increaseNumber = (incdec, productPrice) => {
            let itemval = document.getElementById(incdec);
            let price = document.getElementById(productPrice)
            itemval.value = parseInt(itemval.value) + 1;
            price.innerHTML = parseFloat(price.innerHTML) + 15
            productAmount.innerHTML = parseFloat(productAmount.innerHTML) + 15
            totalAmount.innerHTML = parseFloat(productAmount.innerHTML) + parseFloat(shippingCharge.innerHTML)
        }
        const product = JSON.parse(localStorage.getItem('saveProduct'))
        console.log(product[0]);
        product.forEach(productDetails => {
            const productDiv = document.getElementById('product-div')
            let createDiv = document.createElement('div')
            const allProduct = `<div class="row">
                <div class="col-md-12 card p-4 mt-3 shadow">
                        <div class="row">
                            <div class="col-md-7 d-flex align-items-center">
                                <i class="fas fa-trash-alt"></i>
                                <img src="${productDetails.product_image}" class="product_image">
                                <h5>${productDetails.product_name}</h5>
                            </div>
                            <div class="col-md-5 d-flex align-items-center justify-content-around">
                                <ul class="pagination pagination-md mt-2">
                                    <li class="page-item">
                                        <button class="page-link" onclick="decreaseNumber('item-value', 'product_price')"><i class="fas fa-minus"></i></button>
                                    </li>
                                    <li class="page-item">
                                        <input type="text" value="${productDetails.product_quantity}" class="page-link" id="item-value">
                                    </li>
                                    <li class="page-item">
                                        <button class="page-link" onclick="increaseNumber('item-value', 'product_price')"><i class="fas fa-plus"></i></button>
                                    </li>
                                </ul>
                                <h4>$ <span id="product_price">${productDetails.product_price}</span></h4>
                            </div>
                        </div>
                    </div>
                </div>`
                    createDiv.innerHTML = allProduct;
                    productDiv.appendChild(createDiv)

        });


        const getProduct = localStorage.getItem('products')
        console.log(getProduct);

    </script>
</body>

</html>